<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mosque of Gdansk</title>
  <link rel="stylesheet" href="assets/styles.css">
</head>
<body>
  <header>
    <h1>Welcome to the Mosque of Gdansk</h1>
  </header>
  <main>
    <h2>About the Mosque</h2>
    <p>The Mosque of Gdansk, officially known as the Islamic Cultural Centre in Gdansk, is a place of worship and cultural center for the Muslim community in Gdansk, Poland. It serves as a hub for religious activities, education, and community gatherings.</p>

    <p>Located in the city of Gdansk, this mosque reflects the growing diversity and multiculturalism in Poland. It offers prayers, Islamic education, and events to promote understanding and dialogue between different cultures.</p>

    <h2>History</h2>
    <p>The mosque was established to meet the needs of the Muslim population in Gdansk and surrounding areas. It has become an important landmark symbolizing religious tolerance and coexistence.</p>

    <h2>Visit Us</h2>
    <p class="address">Address: [Insert Address Here]<br>
    Contact: [Insert Contact Information Here]</p>

    <h2>API</h2>
    <p>There is a small backend API available at <code>/api/info</code> when the Node.js backend is running.</p>
    <div class="api-controls">
      <button id="call-backend-btn">Call backend /test</button>
      <label for="api-output" class="visually-hidden">API output</label>
      <textarea id="api-output" rows="8" readonly placeholder="JSON output will appear here..."></textarea>
    </div>
  </main>
  <script>
    (function(){
      const btn = document.getElementById('call-backend-btn');
      const out = document.getElementById('api-output');
      const endpoint = 'http://api.cerbon.id/gdansk/test';

      function setLoading(loading){
        btn.disabled = loading;
        btn.textContent = loading ? 'Loading...' : 'Call backend /test';
      }

      async function callBackend(){
        setLoading(true);
        out.value = '';
        try{
          const res = await fetch(endpoint, { method: 'GET', mode: 'cors' });
          const text = await res.text();
          try{
            const json = JSON.parse(text);
            out.value = JSON.stringify(json, null, 2);
          }catch(e){
            out.value = text;
          }
        }catch(err){
          out.value = 'Error: ' + (err && err.message ? err.message : String(err));
        }finally{
          setLoading(false);
        }
      }

      btn.addEventListener('click', callBackend);
    })();
  </script>
  <footer>
    <p>&copy; 2026 Mosque of Gdansk. All rights reserved.</p>
  </footer>
</body>
</html>
