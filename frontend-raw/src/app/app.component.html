<!-- Full-page loading shown while backend is being checked on startup -->
<div *ngIf="loading" class="loading-overlay">
  <div class="loading-box">
    <span class="spinner" aria-hidden="true"></span>
    <div style="margin-top:8px">{{ 'CALLING' | translate }}</div>
    <div *ngIf="apiMessage$ | async as apiMessage" style="margin-top:8px">{{ apiMessage }}</div>
  </div>
</div>

<!-- Error state when backend didn't respond -->
<div *ngIf="!loading && !initialized" class="error-box" style="text-align:center;padding:24px;">
  <h2>{{ 'ERROR_TITLE' | translate }}</h2>
  <p *ngIf="apiMessage$ | async as apiMessage">{{ apiMessage }}</p>
  <p>
    <button (click)="checkBackendConnectivity()">{{ 'RETRY' | translate }}</button>
  </p>
</div>

<!-- Main app content only rendered after successful backend response -->
<div *ngIf="!loading && initialized">
  <app-header></app-header>
  <main class="main-actions" role="main" aria-label="Main actions">
    <button class="big-action-button" aria-label="{{ 'QURAN_CONTEST' | translate }}">
      <img src="assets/icons/quran_mushaf_score.svg" class="icon" alt="">
      <span class="btn-label">{{ 'QURAN_CONTEST' | translate }}</span>
    </button>
    <button class="big-action-button" aria-label="{{ 'DAILY_CONTEST' | translate }}">
      <img src="assets/icons/daily_checklist.svg" class="icon" alt="">
      <span class="btn-label">{{ 'DAILY_CONTEST' | translate }}</span>
    </button>
  </main>
</div>

<footer class="site-footer" *ngIf="createdAt">
  © {{ createdYear }} — Created at {{ createdAt }}
</footer>
