"use strict";(self.webpackChunkfrontend_raw=self.webpackChunkfrontend_raw||[]).push([[373],{4373(T,h,o){o.d(h,{UsersComponent:()=>m});var d=o(5753),c=o(8527),u=o(483),_=o(861),i=o(6194),e=o(6341),E=o(197),g=o(4287);function R(t,l){1&t&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"LOADING")))}function p(t,l){if(1&t&&(e.j41(0,"div",7),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t){const n=l.ngIf;e.R7$(),e.JRh(e.bMT(2,1,n))}}function M(t,l){if(1&t&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()),2&t){const n=l.$implicit;e.R7$(2),e.JRh(n.username),e.R7$(2),e.JRh(n.roles),e.R7$(2),e.JRh(n.created_at||"-")}}function f(t,l){if(1&t&&(e.j41(0,"table",8)(1,"thead")(2,"tr")(3,"th"),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.j41(6,"th"),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"th"),e.EFF(10),e.nI1(11,"translate"),e.k0s()()(),e.j41(12,"tbody"),e.DNE(13,M,7,3,"tr",9),e.nI1(14,"async"),e.k0s()()),2&t){const n=e.XpG();e.R7$(4),e.JRh(e.bMT(5,4,"USERS.USERNAME")),e.R7$(3),e.JRh(e.bMT(8,6,"USERS.ROLES")),e.R7$(3),e.JRh(e.bMT(11,8,"USERS.CREATED_AT")),e.R7$(3),e.Y8G("ngForOf",e.bMT(14,10,n.users$))}}function I(t,l){1&t&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"USERS.NO_USERS")))}let m=(()=>{class t{http;auth;router;close=new d.bkB;usersSubject=new i.t([]);users$=this.usersSubject.asObservable();loadingSubject=new i.t(!1);loading$=this.loadingSubject.asObservable();errorSubject=new i.t(null);error$=this.errorSubject.asObservable();constructor(n,a,r){this.http=n,this.auth=a,this.router=r}ngOnInit(){this.fetchUsers()}fetchUsers(){this.loadingSubject.next(!0),this.errorSubject.next(null);const n=this.auth.getToken();console.debug("[UsersComponent] token:",n);const a=n?new u.Lr({Authorization:`Bearer ${n}`}):void 0;this.http.get("https://api.cerbon.id/islam.gdansk/users",{headers:a}).subscribe({next:s=>{s&&Array.isArray(s.users)?this.usersSubject.next(s.users):this.usersSubject.next(Array.isArray(s)?s:[]),this.loadingSubject.next(!1)},error:s=>{this.loadingSubject.next(!1),console.debug("[UsersComponent] fetch error:",s);try{this.errorSubject.next(s?.error?.error||s?.message||"ERROR.INTERNAL")}catch{this.errorSubject.next("ERROR.INTERNAL")}}})}closePanel(){try{this.router.navigate(["/super"])}catch{}}static \u0275fac=function(a){return new(a||t)(e.rXU(u.Qq),e.rXU(E.u),e.rXU(g.Ix))};static \u0275cmp=e.VBU({type:t,selectors:[["app-users"]],outputs:{close:"close"},decls:20,vars:24,consts:[[1,"system-page"],[1,"system-header"],[1,"back-btn",3,"click"],[1,"system-body"],[4,"ngIf"],["class","error",4,"ngIf"],["class","users-table",4,"ngIf"],[1,"error"],[1,"users-table"],[4,"ngFor","ngForOf"]],template:function(a,r){if(1&a&&(e.j41(0,"div",0)(1,"header",1)(2,"button",2),e.bIt("click",function(){return r.closePanel()}),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"h2"),e.EFF(6),e.nI1(7,"translate"),e.k0s()(),e.j41(8,"section",3),e.DNE(9,R,3,3,"div",4),e.nI1(10,"async"),e.DNE(11,p,3,3,"div",5),e.nI1(12,"async"),e.DNE(13,f,15,12,"table",6),e.nI1(14,"async"),e.nI1(15,"async"),e.DNE(16,I,3,3,"div",4),e.nI1(17,"async"),e.nI1(18,"async"),e.nI1(19,"async"),e.k0s()()),2&a){let s,b;e.R7$(3),e.SpI("\u2190 ",e.bMT(4,6,"BACK")),e.R7$(3),e.JRh(e.bMT(7,8,"SUPER.USERS_LIST")),e.R7$(3),e.Y8G("ngIf",e.bMT(10,10,r.loading$)),e.R7$(2),e.Y8G("ngIf",e.bMT(12,12,r.error$)),e.R7$(2),e.Y8G("ngIf",!e.bMT(14,14,r.loading$)&&(null==(s=e.bMT(15,16,r.users$))?null:s.length)),e.R7$(3),e.Y8G("ngIf",!(e.bMT(17,18,r.loading$)||null!=(b=e.bMT(18,20,r.users$))&&b.length||e.bMT(19,22,r.error$)))}},dependencies:[c.MD,c.Sq,c.bT,_.h,c.Jj,_.D9],styles:[".system-page[_ngcontent-%COMP%]{padding:12px}.system-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.back-btn[_ngcontent-%COMP%]{background:transparent;border:0;cursor:pointer;font-size:14px}.users-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:12px}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.error[_ngcontent-%COMP%]{color:var(--danger, #b00)}"]})}return t})()}}]);